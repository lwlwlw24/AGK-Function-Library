type ButtonType	img as integer	spr as integer	deleted as integer	state as integerendtypeglobal GUIButtons as ButtonType[0]function CreateGUIButton(x as float, y as float, w as float, h as float, image as string, legend as string)	GUIButtons.length = GUIButtons.length+1	id = GUIButtons.length	if legend = ""		GUIButtons[id].img = LoadImage(image)	else		result = BuildDefaultGUIButton(w,h,image,legend)		GUIButtons[id].img = result	endif	GUIButtons[id].spr = CreateSprite(GUIButtons[id].img)	SetSpriteAnimation(GUIButtons[id].spr, GetImageWidth(GUIButtons[id].img) , GetImageHeight(GUIButtons[id].img)/3,3)	SetSpriteFrame(GUIButtons[id].spr,1)	SetSpriteSize(GUIButtons[id].spr,w,h)	SetSpritePosition(GUIButtons[id].spr,x,y)	GUIButtons[id].state = 1	GUIButtons[id].deleted = 0endfunction idfunction BuildDefaultGUIButton(w as float, h as float, image as string, legend as string)	if image <> ""		tempimg = LoadImage(image)		tempspr = CreateSprite(tempimg)		if h = -1			SetSpriteSize(tempspr,w,h)		else			SetSpriteSize(tempspr,w,h*3)		endif		h = GetSpriteHeight(tempspr)	else		tempspr = CreateSprite(0)		if h = -1			h = w*0.5*3		else			h = h*3		endif		SetSpriteSize(tempspr,w,h)	endif		txt1 = CreateText(legend)		while GetTextTotalWidth(txt1) > w*0.95		SetTextSize(txt1, GetTextSize(txt1)*0.95)	endwhile		SetTextAlignment(txt1,1)	SetTextColor(txt1,220,220,220,220)	SetTextPosition(txt1,w/2,h*0.165- GetTextTotalHeight(txt1)/2)	txt2 = CreateText(legend)	SetTextSize(txt2,GetTextSize(txt1))	SetTextAlignment(txt2,1)	SetTextColor(txt2,0,0,0,255)	SetTextPosition(txt2,w/2, h*0.5- GetTextTotalHeight(txt1)/2)	txt3 = CreateText(legend)	SetTextSize(txt3,GetTextSize(txt1))	SetTextAlignment(txt3,1)	SetTextColor(txt3, 255,255,0,255)	SetTextPosition(txt3,w/2, h*0.83- GetTextTotalHeight(txt1)/2)	Render()	result = GetImage(0,0,w,h)	ClearScreen()	DeleteSprite(tempspr)	DeleteImage(tempimg)	DeleteText(txt1)	DeleteText(txt2)	DeleteText(txt3)endfunction resultfunction HandleGUIButton(id as integer)	if id < 1 or id > GUIButtons.length		exitfunction 0	elseif GUIButtons[id].deleted = 1 		exitfunction 0	endif	result = 0	if GetSpriteHit(GetPointerX(), GetPointerY()) = GUIButtons[id].spr		if GUIButtons[id].state = 1			GUIButtons[id].state = 2		endif		if GetPointerPressed() and GUIButtons[id].state = 2			GUIButtons[id].state = 3		endif		if GetPointerReleased() and GUIButtons[id]. state = 3			GUIButtons[id].state = 2			result = 1		endif	else 		GUIButtons[id].state = 1	endif	SetSpriteFrame(GUIButtons[id].spr, GUIButtons[id].state)endfunction resultfunction DeleteGUIButton(id as integer)	if id < 1 or id > GUIButtons.length		exitfunction 0	endif	GUIButtons[id].deleted = 1	DeleteImage(GetSpriteImageID(GUIButtons[id].spr))	DeleteSprite(GUIButtons[id].spr)	result = 1endfunction result